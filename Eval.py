import ChessPieces

knightPositionValues = [[0,0,0,0,0,0,0,0],
                        [0,0,0.1,0.3,0.3,0.1,0,0],
                        [0.2,0.4,0.6,0.7,0.7,0.6,0.4,0.2],
                        [0.3,0.6,0.8,1,1,0.8,0.6,0.3],
                        [0.3,0.6,0.8,1,1,0.8,0.6,0.3],
                        [0.2,0.4,0.6,0.7,0.7,0.6,0.4,0.2],
                        [0,0,0.1,0.3,0.3,0.1,0,0],
                        [0,0,0,0,0,0,0,0]]

bishopPositionValues = [[0, 0, 0.2, 0, 0, 0.2, 0, 0],
                        [0, 0.7, 0.2, 0.5, 0.5, 0.2, 0.7, 0],
                        [0.3, 0.7, 0, 0, 0, 0, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 0.4, 0.4, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 0.4, 0.4, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0, 0, 0, 0, 0.7, 0.3],
                        [0, 0.7, 0.2, 0.5, 0.5, 0.2, 0.7, 0],
                        [0, 0, 0, 0, 0, 0, 0, 0]]

kingPositionValuesNotEndgame = [[0,1,0.3,0,0,0.3,1,0],
                      [0,0,0,0,0,0,0,0],
                      [0,0,0,0,0,0,0,0],
                      [0,0,0,0,0,0,0,0],
                      [0,0,0,0,0,0,0,0],
                      [0,0,0,0,0,0,0,0],
                      [0,0,0,0,0,0,0,0],
                      [0,1,0.3,0,0,0.3,1,0]]

queenPositionValues = [[0, 0, 0.2, 0, 0, 0.2, 0, 0],
                        [0, 0.7, 0.2, 0.5, 0.5, 0.2, 0.7, 0],
                        [0.3, 0.7, 0.5, 0.7, 0.7, 0.5, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 1, 1, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 1, 1, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0.5, 0.7, 0.7, 0.5, 0.7, 0.3],
                        [0, 0.7, 0.2, 0.5, 0.5, 0.2, 0.7, 0],
                        [0, 0, 0, 0, 0, 0, 0, 0]]

rookPositionValues = [[0, 0, 0.6, 0.7, 0.7, 0.6, 0, 0],
                        [0, 0.7, 0.5, 0.5, 0.5, 0.5, 0.7, 0],
                        [0.3, 0.7, 0.5, 0.7, 0.7, 0.5, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 1, 1, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0.9, 1, 1, 0.9, 0.7, 0.3],
                        [0.3, 0.7, 0.5, 0.7, 0.7, 0.5, 0.7, 0.3],
                        [0, 0.7, 0.5, 0.5, 0.5, 0.5, 0.7, 0],
                        [0, 0, 0.6, 0.7, 0.7, 0.6, 0, 0]]

pawnPositionValuesWhite = [[1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0.2, 0, 0, 0.6, 0.6, 0, 0, 0.2],
                      [0.4, 0, 0.3, 0.7, 0.7, 0.6, 0, 0.4],
                      [0.2, 0.3, 0.1, 0.4, 0.4, 0.3, 0.5, 0.1],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0]]

pawnPositionValuesBlack = [[0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0.2, 0.3, 0.1, 0.4, 0.4, 0.3, 0.5, 0.1],
                      [0.4, 0, 0.3, 0.7, 0.7, 0.6, 0, 0.4],
                      [0.2, 0, 0, 0.6, 0.6, 0, 0, 0.2],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000]]

charToBoard = {'Q' : queenPositionValues,
               'N' : knightPositionValues,
               'B' : bishopPositionValues,
               'R' : rookPositionValues,
               'K' : kingPositionValuesNotEndgame,
               'PW' : pawnPositionValuesWhite,
               'PB' : pawnPositionValuesBlack
               }


def improve(newboard, oldboard, piece, move):
    if not capture(newboard, oldboard, piece, move):
        if piece[0] == 'P':
            oldValue = charToBoard.get(piece[:2])[move[2]][move[3]]
            newValue = charToBoard.get(piece[:2])[move[0]][move[1]]
        else:
            oldValue = charToBoard.get(piece[0])[move[2]][move[3]]
            newValue = charToBoard.get(piece[0])[move[0]][move[1]]
        return newValue - oldValue
    return 0


def capture(board, oldboard, piece, move):

    if oldboard[move[0]][move[1]] is not None:
        return True
    return False